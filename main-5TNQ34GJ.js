import{a as u}from"./chunk-Q6P6KOMJ.js";import{c as ot,i as rt,j as st,k as at,l as lt,m as ct,o as ut,p as j,q as b,r as H,s as dt}from"./chunk-KZEZHTV3.js";import{$ as w,Aa as W,Fa as p,Ga as X,Ja as Z,La as D,Ma as E,N as O,Na as k,Oa as M,Pa as S,Qa as a,Ra as c,Sa as f,T as s,Ta as L,V as m,Xa as _,Ya as v,Za as tt,_ as A,_a as et,ab as d,bb as y,hb as h,i as Y,ib as F,jb as nt,k as J,lb as it,n as T,sa as x,ta as Q,w as K,xa as l}from"./chunk-TMRUMUQV.js";import{d as q}from"./chunk-JMZ7DUBM.js";var N=()=>()=>{let t=s(u),e=s(j);return t.isLoggedIn()?!0:e.parseUrl("auth/login")},pt=()=>()=>{let t=s(u),e=s(j);return t.isLoggedIn()?e.parseUrl("home"):!0};var mt=[{path:"auth",canActivate:[pt()],loadChildren:()=>import("./chunk-WI5D6ENA.js").then(t=>t.AUTH_ROUTES)},{path:"client",canActivate:[N()],loadChildren:()=>import("./chunk-22GEM7IJ.js").then(t=>t.CLIENT_ROUTES)},{path:"provider",canActivate:[N()],loadChildren:()=>import("./chunk-WFGTJW24.js").then(t=>t.PROVIDER_ROUTES)},{path:"search",loadChildren:()=>import("./chunk-QODXMMKF.js").then(t=>t.SEARCH_ROUTES)},{path:"home",loadComponent:()=>import("./chunk-FCQZ3SN2.js").then(t=>t.HomeComponent)},{path:"",redirectTo:"home",pathMatch:"full"}];var C=(()=>{let e=class e{constructor(){this.toasts=Q([])}show(o,n,r,g){let kt=[{type:o,title:n,body:r,delay:g},...this.toasts()];this.toasts.set(kt)}removeToast(o){this.toasts().splice(o,1)}removeLastToast(){this.toasts().pop()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ht=(t,e)=>{let i=s(C),o=s(u);return e(t).pipe(K(n=>{if([401,403].includes(n.status))i.show("error","Sorry!","Unathorized. Please login again."),o.refreshToken();else if(n.status==400){let r="";n.error.message?n.error.message.forEach(g=>{r=r+g+`. 
`}):r="Something went wrong. Please try later.",i.show("error","Sorry!",r)}else n.status==500?i.show("error","Sorry!",n.error.message):i.show("error","Sorry!","Something went wrong. Please try later. ");return J(()=>n)}))};var ft=(()=>{let e=class e{constructor(){this.auth=s(u),this.toaster=s(C),this.count=0}intercept(o,n){return Y(this.handle(o,n))}handle(o,n){return q(this,null,function*(){if(!this.auth?.user()?.accessToken)return yield T(n.handle(o));if(!this.auth.isTokenExpired()){this.count=0;let r=U(o,this.auth.user()?.accessToken);return yield T(n.handle(r))}if(this.auth.isTokenExpired()&&this.count==1){let r=U(o,this.auth.user()?.accessToken);return yield T(n.handle(r))}if(this.auth.isTokenExpired()&&this.count==2&&(this.count=0,this.auth.logout("login")),this.auth.isTokenExpired()&&this.count==0){this.count++;let r=this.auth.refreshToken(),g=yield T(r);this.auth.setUser(g),this.toaster.show("success","Attn","Token refreshed.");let P=U(o,this.auth.user()?.accessToken);return yield T(n.handle(P))}else return yield T(n.handle(o))})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),U=(t,e)=>t.clone({setHeaders:{Authorization:`Bearer ${e}`}});var _t={providers:[{provide:rt,useClass:ft,multi:!0},dt(mt),st(lt(),at([ht]))]};var R=()=>({exact:!0});function Mt(t,e){if(t&1&&(a(0,"li")(1,"a",3),d(2),c()()),t&2){let i=e.$implicit;l(1),p("routerLink",i.url)("routerLinkActiveOptions",F(3,R)),l(1),y(i.name)}}function St(t,e){if(t&1&&M(0,Mt,3,4,"li",null,k),t&2){let i=v(2);S(i.providerMenuItems)}}function Ft(t,e){if(t&1&&(a(0,"li")(1,"a",3),d(2),c()()),t&2){let i=e.$implicit;l(1),p("routerLink",i.url)("routerLinkActiveOptions",F(3,R)),l(1),y(i.name)}}function It(t,e){if(t&1&&M(0,Ft,3,4,"li",null,k),t&2){let i=v(2);S(i.clientMenuItems)}}function Dt(t,e){if(t&1){let i=L();D(0,St,2,0)(1,It,2,0),f(2,"span",1),a(3,"li")(4,"a",2),_("click",function(){A(i);let n=v();return w(n.logout())}),d(5,"Logout"),c()()}if(t&2){let i=v();E(0,i.auth.user().user!=null&&i.auth.user().user.isProvider?0:1)}}function Et(t,e){if(t&1&&(a(0,"li")(1,"a",3),d(2),c()()),t&2){let i=e.$implicit;l(1),p("routerLink",i.url)("routerLinkActiveOptions",F(3,R)),l(1),y(i.name)}}function At(t,e){if(t&1&&(a(0,"li")(1,"a",3),d(2),c()()),t&2){let i=e.$implicit;l(1),p("routerLink",i.url)("routerLinkActiveOptions",F(3,R)),l(1),y(i.name)}}function wt(t,e){if(t&1&&(M(0,Et,3,4,"li",null,k),f(2,"span",1),M(3,At,3,4,"li",null,k)),t&2){let i=v();S(i.menuItems),l(3),S(i.authMenuItems)}}var vt=(()=>{let e=class e{constructor(){this.auth=s(u),this.userRoute="client",this.loggedIn=x(()=>this.auth.isLoggedIn()),this.isProvider=x(()=>{this.auth.user().user?.isProvider}),this.logout=()=>{this.auth.logout("home")},this.menuItems=[{name:"Find Provider",url:"/search/providers",icon:"search"}],this.loggedInMenuItems=[],this.clientMenuItems=[{name:"Dashboard",url:"client/dashboard",icon:"dashboard"},{name:"Find Provider",url:"/search/providers",icon:"search"},{name:"My Profile",url:"client/profile",icon:"manage_accounts"}],this.providerMenuItems=[{name:"Dashboard",url:"provider/dashboard",icon:"dashboard"},{name:"My Profile",url:"provider/profile",icon:"manage_account"}],this.authMenuItems=[{name:"Login",url:"auth/login",icon:"login"},{name:"Sign up",url:"auth/registration",icon:"person_add"}]}ngOnInit(){this.auth.user().user?.isProvider?this.loggedInMenuItems=this.providerMenuItems:this.loggedInMenuItems=this.clientMenuItems}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-header-nav-menu"]],standalone:!0,features:[h],decls:3,vars:1,consts:[[1,"nav-links"],[1,"pa-md"],[3,"click"],["routerLinkActive","active-link",3,"routerLink","routerLinkActiveOptions"]],template:function(n,r){n&1&&(a(0,"ul",0),D(1,Dt,6,1)(2,wt,5,0),c()),n&2&&(l(1),E(1,r.loggedIn()?1:2))},dependencies:[b,H],styles:["[_nghost-%COMP%]{margin-left:auto}"]});let t=e;return t})();var Lt=t=>({hidden:t}),Pt=(t,e,i)=>({"fade-anim":t,in:e,"show-drop-menu":i}),Ot=["*"],V=(()=>{let e=class e{constructor(){this.auth=s(u),this.modalValue=!1,this.fadeAnim=!1,this.fadeIn=!1,this.modalChange=new W,this.hideContainer=!0}get modal(){return this.modalValue}set modal(o){o?(this.hideContainer=!1,this.fadeAnim=!0,setTimeout(()=>{this.fadeIn=!0})):(this.fadeIn=!1,setTimeout(()=>{this.fadeAnim=!1,this.hideContainer=!0},400)),this.modalValue=o,this.modalChange.emit(this.modalValue)}closeModal(){this.modal=!1}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-header-user-drop-menu"]],inputs:{modal:"modal"},outputs:{modalChange:"modalChange"},standalone:!0,features:[h],ngContentSelectors:Ot,decls:4,vars:8,consts:[[3,"ngClass"],["role","dialog",1,"nav-menu-drop-container",3,"ngClass","click"],[1,"nav-drop-links"]],template:function(n,r){n&1&&(tt(),a(0,"div",0)(1,"div",1),_("click",function(){return r.closeModal()}),a(2,"div",2),et(3),c()()()),n&2&&(p("ngClass",nt(2,Lt,r.hideContainer)),l(1),p("ngClass",it(4,Pt,r.fadeAnim,r.fadeIn,r.fadeIn)))},dependencies:[ot]});let t=e;return t})();function bt(t,e){if(t&1){let i=L();a(0,"span",10),_("click",function(){A(i);let n=v();return w(n.closeMenu())}),d(1,"close"),c()}}function Ht(t,e){if(t&1){let i=L();a(0,"span",10),_("click",function(){A(i);let n=v();return w(n.openMenu())}),d(1,"menu"),c()}}var Rt=()=>({exact:!0});function jt(t,e){t&1&&(a(0,"a",11),d(1,"Login"),c()),t&2&&p("routerLink","auth/login")("routerLinkActiveOptions",F(2,Rt))}var gt=(()=>{let e=class e{constructor(){this.auth=s(u),this.toggleMenuModal=!1,this.loggedIn=x(()=>this.auth.isLoggedIn())}openMenu(){this.toggleMenuModal=!0}closeMenu(){this.toggleMenuModal=!1}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-header"]],standalone:!0,features:[h],decls:14,vars:4,consts:[[1,"header"],[1,"container","container-md","items-center","flex"],[1,"mr-auto"],["routerLinkActive","active-link",3,"routerLink"],[1,"sm-hide"],[1,"md-hide","lg-hide","flex","items-center"],[1,"flex","items-center","mr-xs"],["class","material-symbols-outlined"],[3,"modal","modalChange"],["class","nav-link","routerLinkActive","active-link",3,"routerLink","routerLinkActiveOptions"],[1,"material-symbols-outlined",3,"click"],["routerLinkActive","active-link",1,"nav-link",3,"routerLink","routerLinkActiveOptions"]],template:function(n,r){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),d(4,"Brand"),c()(),a(5,"div",4),f(6,"app-header-nav-menu"),c(),a(7,"div",5)(8,"div",6),D(9,bt,2,0,"span",7)(10,Ht,2,0),a(11,"app-header-user-drop-menu",8),_("modalChange",function(P){return r.toggleMenuModal=P}),f(12,"app-header-nav-menu"),c()(),D(13,jt,2,3,"a",9),c()()()),n&2&&(l(3),p("routerLink","home"),l(6),E(9,r.toggleMenuModal?9:10),l(2),p("modal",r.toggleMenuModal),l(2),E(13,r.loggedIn()?-1:13))},dependencies:[vt,b,V,H]});let t=e;return t})();function yt(t,e){return{type:7,name:t,definitions:e,options:{}}}function $(t,e=null){return{type:4,styles:e,timings:t}}function B(t){return{type:6,styles:t,offset:null}}function z(t,e,i){return{type:0,name:t,styles:e,options:i}}function G(t,e,i=null){return{type:1,expr:t,animation:e,options:i}}var Ct=(()=>{let e=class e{constructor(){this.toaster=s(C)}ngOnInit(){setTimeout(()=>this.toaster.removeLastToast(),this.toast.delay||6e3)}removeToast(){this.toaster.removeToast(this.i)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-toaster-details"]],inputs:{toast:"toast",i:"i"},standalone:!0,features:[h],decls:7,vars:7,consts:[[1,"toast-heading"],[1,"close",3,"click"]],template:function(n,r){n&1&&(a(0,"div")(1,"h4",0),d(2),c(),a(3,"p"),d(4),c(),a(5,"a",1),_("click",function(){return r.removeToast()}),d(6,"\xD7"),c()()),n&2&&(Z("toast toast-",r.toast.type,""),X("bottom",r.i*100,"px"),l(2),y(r.toast.title),l(2),y(r.toast.body))},data:{animation:[yt("toasterState",[z("inactive",B({opacity:0})),z("active",B({opacity:1})),G("inactive => active",$("500ms ease-in")),G("active => inactive",$("500ms ease-out"))])]}});let t=e;return t})();function Nt(t,e){if(t&1&&f(0,"app-toaster-details",0),t&2){let i=e.$implicit,o=e.$index;p("toast",i)("i",o)}}var Tt=(()=>{let e=class e{constructor(){this.toaster=s(C),this.toasts=x(()=>this.toaster.toasts())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-toaster"]],standalone:!0,features:[h],decls:2,vars:0,consts:[[3,"toast","i"]],template:function(n,r){n&1&&M(0,Nt,1,2,"app-toaster-details",0,k),n&2&&S(r.toasts())},dependencies:[Ct]});let t=e;return t})();var xt=(()=>{let e=class e{constructor(){this.title="socket-io",this.authService=s(u)}ngOnInit(){console.log("app component initialized",this.authService.user()?.accessToken)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-root"]],standalone:!0,features:[h],decls:3,vars:0,template:function(n,r){n&1&&f(0,"app-header")(1,"router-outlet")(2,"app-toaster")},dependencies:[ut,gt,Tt]});let t=e;return t})();ct(xt,_t).catch(t=>console.error(t));
