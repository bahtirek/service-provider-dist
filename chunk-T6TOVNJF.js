import{a as B}from"./chunk-ZDK32Y7P.js";import"./chunk-OJXRLJM7.js";import"./chunk-B5SXJMOA.js";import{a as N}from"./chunk-3H2OTNLZ.js";import{a as L}from"./chunk-TAGQ3FKW.js";import{a as b,b as O,c as $}from"./chunk-BNXZA37R.js";import{a as k}from"./chunk-3QDBQQU5.js";import{a as A}from"./chunk-BXFS65BI.js";import"./chunk-AOEJRZ7Y.js";import{b as E,d as x,f as w,q as F}from"./chunk-DMLF7CN4.js";import{m as y,o as T}from"./chunk-VB3MO2AL.js";import{$a as v,Ea as u,La as _,Ma as j,Na as D,Oa as r,Pa as o,Qa as g,T as c,V as f,Va as m,Wa as M,Z as P,_a as s,bb as I,fb as h,wa as l,za as C}from"./chunk-O2WMGYX5.js";import"./chunk-JMZ7DUBM.js";function V(a,n){if(a&1&&(r(0,"li",9),s(1),o()),a&2){let S=n.$implicit;l(1),v(S==null?null:S.name)}}function z(a,n){if(a&1&&(r(0,"li")(1,"div"),s(2),o(),r(3,"div"),s(4),o()()),a&2){let S=n.$implicit,t=M();l(2),v(S.weekDay),l(2),v(t.providerProfileDetails.workHours)}}var R=(()=>{let n=class n{constructor(){this.auth=c(k),this.providerDetails={},this.providerProfileDetails={}}set provider(t){this.providerDetails=t,console.log(this.providerDetails)}set providerProfile(t){this.providerProfileDetails=t}ngOnInit(){this.checkIfClient()}ngOnChanges(t){console.log(t),console.log(this.providerProfileDetails)}checkIfClient(){this.auth.user()?.user?.isClient}cardClicked(){}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=f({type:n,selectors:[["app-provider-details"]],inputs:{provider:"provider",providerProfile:"providerProfile"},standalone:!0,features:[P,h],decls:42,vars:6,consts:[[1,"card","provider-card",3,"click"],[1,"reset"],[1,"flex"],[1,"text-bold","mr-md","flex"],[1,"material-symbols-outlined"],[1,"flex","no-wrap"],[1,"material-symbols-outlined","mb-auto"],[1,"ml-xxl","mt-xs","mb-md"],[1,"work-hours-list"],[1,"pa-none"],["class","pa-none"]],template:function(i,e){i&1&&(r(0,"div",0),m("click",function(){return e.cardClicked()}),r(1,"ul",1)(2,"li",2)(3,"div",3)(4,"span",4),s(5,"badge"),o()(),r(6,"div"),s(7),o()(),r(8,"li",2)(9,"div",3)(10,"span",4),s(11,"email"),o()(),r(12,"div"),s(13),o()(),r(14,"li",2)(15,"div",3)(16,"span",4),s(17,"phone"),o()(),r(18,"div"),s(19),o()(),r(20,"li",2)(21,"div",3)(22,"span",4),s(23,"home_pin"),o()(),r(24,"div"),s(25),o()(),r(26,"li",5)(27,"div",3)(28,"span",6),s(29,"info"),o()(),r(30,"div"),s(31),o()()(),r(32,"ul",7),j(33,V,2,1,"li",10,_),o(),r(35,"div",5)(36,"div",3)(37,"span",4),s(38,"calendar_month"),o()(),r(39,"ul",8),j(40,z,5,2,"li",null,_),o()()()),i&2&&(l(7),I("",e.providerProfileDetails.firstName," ",e.providerProfileDetails.lastName,""),l(6),v(e.providerProfileDetails.email),l(6),v(e.providerProfileDetails.phoneNumber),l(6),v(e.providerProfileDetails.address),l(6),v(e.providerProfileDetails.description),l(2),D(e.providerProfileDetails.category),l(7),D(e.providerProfileDetails.availableDays))}});let a=n;return a})();var H=(()=>{let n=class n{constructor(){this.subjectService=c(b),this.sessionTitle="",this.errorMessage="",this.validationStarted=!1,this.subjectDetails={},this.cancel=new C,this.openSession=new C}set toggleModal(t){t||(this.sessionTitle="")}createSession(){let t=this.sessionTitle.trim();if(!t){this.errorMessage="Field required",this.validationStarted=!0;return}this.subjectDetails.title=t,this.subjectService.createSubject(this.subjectDetails).subscribe({next:i=>{i.subjectId&&this.openSession.emit(i.subjectId),this.sessionTitle=""},error:i=>{console.log(i)}})}onModelChange(t){!t.trim()&&this.validationStarted?this.errorMessage="Field required":this.errorMessage=""}onCancel(){this.sessionTitle="",this.cancel.emit()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=f({type:n,selectors:[["app-new-subject"]],inputs:{subjectDetails:"subjectDetails",toggleModal:"toggleModal"},outputs:{cancel:"cancel",openSession:"openSession"},standalone:!0,features:[h],decls:8,vars:2,consts:[[1,"form-element","mt-lg"],["for","sessionTitle"],["type","text","id","sessionTitle",3,"ngModel","ngModelChange"],[3,"message"],[1,"block","ml-auto",3,"click"]],template:function(i,e){i&1&&(r(0,"div")(1,"div",0)(2,"label",1),s(3,"Session Title"),o(),r(4,"input",2),m("ngModelChange",function(p){return e.sessionTitle=p})("ngModelChange",function(p){return e.onModelChange(p)}),o(),g(5,"app-form-error",3),o(),r(6,"button",4),m("click",function(){return e.createSession()}),s(7,"Submit"),o()()),i&2&&(l(4),u("ngModel",e.sessionTitle),l(1),u("message",e.errorMessage))},dependencies:[N,F,E,x,w]});let a=n;return a})();var Se=(()=>{let n=class n{constructor(){this.route=c(y),this.router=c(T),this.providerService=c(A),this.subjectService=c(b),this.navigation=c($),this.showFullDetails=!0,this.providerProfileDetails={},this.providerDetails={},this.providerId="",this.toggleModal=!1,this.subjectDetails={},this.subjectList=[],this.displayAsCard=!1}ngOnInit(){this.getProviderDetails()}createSession(){this.toggleModal=!0;let t=parseInt(this.providerId);this.subjectDetails={title:"",providerId:t}}getProviderDetails(){let t=this.providerService.getProvider();t||this.navigation.back(),this.providerId=t.providerId,this.providerService.getProviderProfileDetailsById(this.providerId).subscribe({next:i=>{this.providerProfileDetails=i,this.getClientProviderId()},error:i=>{console.log(i)}})}getClientProviderId(){let i=this.providerService.myProviders.find(e=>e.providerId==parseInt(this.providerId));if(i?.clientProviderId){this.getSubjects(i?.clientProviderId);return}this.providerService.getMyProviders().subscribe({next:e=>{let d=e.find(p=>p.providerId==parseInt(this.providerId));d?.clientProviderId&&this.getSubjects(d?.clientProviderId)},error:e=>{console.log(e)}})}openSession(t){this.cancel(),this.router.navigate([`client/messages/${t}`])}getSubjects(t){this.subjectService.getProviderSubjects(t).subscribe({next:i=>{this.subjectList=i},error:i=>{console.log(i)}})}onSubjectClick(t){this.subjectService.saveSubjectToLocal(t),this.router.navigate(["./messages"],{relativeTo:this.route})}navigateToDashboard(){this.router.navigate(["client/dashboard"])}cancel(){this.toggleModal=!1}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=f({type:n,selectors:[["app-my-provider"]],standalone:!0,features:[h],decls:9,vars:6,consts:[[1,"container","container-md"],[1,"flex","column","gap-xl"],[3,"providerProfile"],[1,"ml-auto",3,"click"],[3,"subjectList","displayAsCard","onSubjectClick$"],[3,"modal","modalChange"],[3,"subjectDetails","toggleModal","cancel","openSession"]],template:function(i,e){i&1&&(r(0,"div",0),g(1,"app-back-button"),r(2,"div",1),g(3,"app-provider-details",2),r(4,"button",3),m("click",function(){return e.createSession()}),s(5,"Start session"),o(),r(6,"app-subject-list",4),m("onSubjectClick$",function(p){return e.onSubjectClick(p)}),o()()(),r(7,"app-modal",5),m("modalChange",function(p){return e.toggleModal=p}),r(8,"app-new-subject",6),m("cancel",function(){return e.cancel()})("openSession",function(p){return e.openSession(p)}),o()()),i&2&&(l(3),u("providerProfile",e.providerProfileDetails),l(3),u("subjectList",e.subjectList)("displayAsCard",e.displayAsCard),l(1),u("modal",e.toggleModal),l(1),u("subjectDetails",e.subjectDetails)("toggleModal",e.toggleModal))},dependencies:[R,L,H,B,O]});let a=n;return a})();export{Se as MyProviderComponent};
