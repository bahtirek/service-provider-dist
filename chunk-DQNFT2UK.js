import{a as h}from"./chunk-Y6NGLBTQ.js";import{g as r,h as n}from"./chunk-KZEZHTV3.js";import{N as o,T as u,f as c}from"./chunk-TMRUMUQV.js";var m=(()=>{let s=class s{constructor(){this.url=h.apiUrl,this.http=u(n),this.subjects=[],this.subjectsSource=new c}createSubject(t){return this.http.post(this.url+"/messages/subject",t)}getProviderSubjectsAPI(t){let e=new r().set("providerId",t);return this.http.get(this.url+"/messages/client-provider-subjects",{params:e})}getClientSubjectsAPI(t){let e=new r().set("clientId",t);return this.http.get(this.url+"/messages/provider-client-subjects",{params:e})}saveSubjectToLocal(t){window.localStorage.setItem("subject",JSON.stringify(t))}getSubjectFromLocal(){let t=window.localStorage.getItem("subject");return t?JSON.parse(t):null}getProviderSubjects(t){if(this.providerId&&this.providerId==t&&this.subjects.length>0){this.subjectsSource.next(this.subjects);return}this.providerId=t,this.getProviderSubjectsAPI(t).subscribe({next:e=>{this.subjects=e,this.subjectsSource.next(e)},error:e=>{console.log(e)}})}getClientSubjects(t){if(this.clientId&&this.clientId==t&&this.subjects.length>0){this.subjectsSource.next(this.subjects);return}this.clientId==t,this.getClientSubjectsAPI(t).subscribe({next:e=>{this.subjectsSource.next(e),this.subjects=e},error:e=>{console.log(e)}})}updateSubjects(t){let e=this.subjects.findIndex(b=>b.subjectId===t);e!=-1&&(this.subjects[e].newMessageCount=this.subjects[e].newMessageCount+1)}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"});let i=s;return i})();export{m as a};
