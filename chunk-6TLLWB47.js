import{a as w}from"./chunk-UQ6SF63W.js";import{a as I}from"./chunk-DZOJIH4T.js";import"./chunk-FNI2SAWJ.js";import"./chunk-H3ADPMVC.js";import{a as P}from"./chunk-TLGUQTKO.js";import{a as k}from"./chunk-CQAC2FCZ.js";import{a as E,b as F}from"./chunk-ANF77CLI.js";import{a as S}from"./chunk-JHCJFOQM.js";import"./chunk-WRN5WRPW.js";import{a as T}from"./chunk-JR77RRA2.js";import"./chunk-Y6NGLBTQ.js";import{b as _,d as M,f as D,q as y}from"./chunk-M7TSCOLF.js";import{n as j,p as C}from"./chunk-N6PQCY5R.js";import{$a as v,Aa as b,Fa as d,Pa as r,Qa as n,Ra as m,T as l,V as h,Wa as c,gb as g,ta as f,xa as a}from"./chunk-DZ4JCLGF.js";import"./chunk-JMZ7DUBM.js";var L=(()=>{let o=class o{constructor(){this.subjectService=l(S),this.sessionTitle="",this.errorMessage="",this.validationStarted=!1,this.subjectDetails={},this.cancel=new b,this.openSession=new b}set toggleModal(e){e||(this.sessionTitle="")}createSession(){let e=this.sessionTitle.trim();if(!e){this.errorMessage="Field required",this.validationStarted=!0;return}this.subjectDetails.title=e,this.subjectService.createSubject(this.subjectDetails).subscribe({next:i=>{i.subjectId&&this.openSession.emit(i),this.sessionTitle=""},error:i=>{console.log(i)}})}onModelChange(e){!e.trim()&&this.validationStarted?this.errorMessage="Field required":this.errorMessage=""}onCancel(){this.sessionTitle="",this.cancel.emit()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=h({type:o,selectors:[["app-new-subject"]],inputs:{subjectDetails:"subjectDetails",toggleModal:"toggleModal"},outputs:{cancel:"cancel",openSession:"openSession"},standalone:!0,features:[g],decls:8,vars:2,consts:[[1,"form-element","mt-lg"],["for","sessionTitle"],["type","text","id","sessionTitle",3,"ngModel","ngModelChange"],[3,"message"],[1,"block","ml-auto",3,"click"]],template:function(i,t){i&1&&(r(0,"div")(1,"div",0)(2,"label",1),v(3,"Session Title"),n(),r(4,"input",2),c("ngModelChange",function(s){return t.sessionTitle=s})("ngModelChange",function(s){return t.onModelChange(s)}),n(),m(5,"app-form-error",3),n(),r(6,"button",4),c("click",function(){return t.createSession()}),v(7,"Submit"),n()()),i&2&&(a(4),d("ngModel",t.sessionTitle),a(1),d("message",t.errorMessage))},dependencies:[P,y,_,M,D]});let p=o;return p})();var oe=(()=>{let o=class o{constructor(){this.route=l(j),this.router=l(C),this.providerService=l(T),this.subjectService=l(S),this.navigation=l(F),this.showFullDetails=!0,this.providerProfileDetails={},this.providerDetails={},this.providerId="",this.toggleModal=!1,this.subjectDetails={},this.subjectList=f([]),this.displayAsCard=!1,this.provider={},this.providers=[],this.showCompleteDetails=!1}ngOnInit(){this.getMyProviders(),this.getProviderDetails()}createSession(){this.toggleModal=!0;let e=this.provider.providerId;this.subjectDetails={title:"",providerId:e}}getProviderDetails(){this.provider=this.providerService.getProvider(),this.provider.providerId||this.navigation.back(),this.providerService.getProviderProfileDetailsById(this.provider.providerId).subscribe({next:e=>{this.providerProfileDetails=e,this.getSubjects(this.provider?.providerId)},error:e=>{console.log(e)}})}openSession(e){this.cancel(),this.onSubjectClick(e)}getSubjects(e){if(!this.providers.some(t=>t.providerId==this.provider.providerId)){this.showCompleteDetails=!0;return}this.subjectService.getProviderSubjects(e),this.subjectList=this.subjectService.subjects}onSubjectClick(e){this.providerService.addProvider(this.provider),this.subjectService.saveSubjectToLocal(e),this.router.navigate(["./messages"],{relativeTo:this.route})}navigateToDashboard(){this.router.navigate(["client/dashboard"])}cancel(){this.toggleModal=!1}getMyProviders(){this.providers=this.providerService.myProviders,!(this.providers.length>0)&&this.providerService.getMyProviders().subscribe({next:e=>{this.providers=e,this.providerService.myProviders=e},error:e=>{console.log(e)}})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=h({type:o,selectors:[["app-my-provider"]],standalone:!0,features:[g],decls:9,vars:7,consts:[[1,"container","container-md"],[1,"flex","column","gap-xl"],[3,"providerProfile","showCompleteDetails"],[1,"ml-auto",3,"click"],[3,"subjectList","displayAsCard","onSubjectClick$"],[3,"modal","modalChange"],[3,"subjectDetails","toggleModal","cancel","openSession"]],template:function(i,t){i&1&&(r(0,"div",0),m(1,"app-back-button"),r(2,"div",1),m(3,"app-provider-details",2),r(4,"button",3),c("click",function(){return t.createSession()}),v(5,"Start session"),n(),r(6,"app-subject-list",4),c("onSubjectClick$",function(s){return t.onSubjectClick(s)}),n()()(),r(7,"app-modal",5),c("modalChange",function(s){return t.toggleModal=s}),r(8,"app-new-subject",6),c("cancel",function(){return t.cancel()})("openSession",function(s){return t.openSession(s)}),n()()),i&2&&(a(3),d("providerProfile",t.providerProfileDetails)("showCompleteDetails",t.showCompleteDetails),a(3),d("subjectList",t.subjectList())("displayAsCard",t.displayAsCard),a(1),d("modal",t.toggleModal),a(1),d("subjectDetails",t.subjectDetails)("toggleModal",t.toggleModal))},dependencies:[w,k,L,I,E]});let p=o;return p})();export{oe as MyProviderComponent};
